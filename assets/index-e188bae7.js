import{v as h,a as _,b as S,c as A,d as $,e as f,f as x,g as M}from"./useP5-e34c7c49.js";import{r as w,b as C,ag as b,n as L,bh as R,d as E,C as k}from"./index-27e8f055.js";import"./p5-1003a71f.js";const T=s=>{const d=w("/vue3_tauri_fun/");let u=C({});const I=()=>{if(s.value){const l=R({lock:!0,text:"Loading...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),a=h.newInstance({container:s==null?void 0:s.value}),e=a.getRenderer(),o=a.getRenderWindow(),c=_.newInstance(),t=S.newInstance(),r=A.newInstance(),n=$.newInstance(),i=f.newInstance(),g=f.newInstance();t.setInputConnection(c.getOutputPort()),t.setHideElements(["H"]),r.setInputConnection(t.getOutputPort(0)),r.setScaleArray(t.getSphereScaleArrayName()),i.setMapper(r),n.setInputConnection(t.getOutputPort(1)),n.setScaleArray("stickScales"),n.setOrientationArray("orientation"),g.setMapper(n),c.setUrl(`${d.value}data/vtk/2LYZ.pdb`).then(()=>{e.resetCamera(),o.render(),l.close();const p=x.newInstance(),v=new Image;v.src="/vue3_tauri_fun/imgs/page/spline.png",v.onload=()=>{p.setInterpolate(!0),p.setEdgeClamp(!0),p.setImage(v),e.setEnvironmentTexture(p),e.setEnvironmentTextureDiffuseStrength(1),e.setEnvironmentTextureSpecularStrength(1)}});const m=M.newInstance({positional:!1,color:[1.5,0,.2],intensity:1});return m.setDirection([.8,1,-1]),e.addLight(m),e.addActor(i),e.addActor(g),e.resetCamera(),o.render(),{fullScreenRenderer:a,renderWindow:o,renderer:e,reader:c,filter:t,sphereMapper:r,stickMapper:n,sphereActor:i,stickActor:g}}};b(()=>{if(u.renderer){const{fullScreenRenderer:l,renderWindow:a,renderer:e,reader:o,filter:c,sphereMapper:t,stickMapper:r,sphereActor:n,stickActor:i}=u;e.delete(),c.delete(),t.delete(),r.delete(),n.delete(),i.delete(),o.delete(),a.delete(),window.removeEventListener("resize",l.resize),l.delete()}}),L(()=>{u=I()})},y={render(){return k("div",{class:"view"},[k("div",{class:"container",ref:"container"})])}},W=E({...y,__name:"index",setup(s){const d=w(null);return T(d),{container:d}}});export{W as default};
