var d=Object.defineProperty;var l=(r,t,e)=>t in r?d(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var i=(r,t,e)=>(l(r,typeof t!="symbol"?t+"":t,e),e);import{B as m,l as h,S as p,i as f,W as w,aJ as g,c,s as u,a7 as v,a8 as _}from"./three.module-3e64dab6.js";import{O as x}from"./OrbitControls-dfe0b90a.js";import{d as b,r as y,A as C,l as S,o as z,c as M,a as k}from"./index-27e8f055.js";import"./p5-1003a71f.js";class B{constructor(){i(this,"geometry",new m(.2,.2,.2));i(this,"material",new h);i(this,"mesh");i(this,"scene");i(this,"renderer");i(this,"camera");i(this,"container");i(this,"width");i(this,"height");i(this,"control");i(this,"time",0)}init(t){this.time=10,this.container=t.container,this.width=this.container.clientWidth||window.innerWidth,this.height=this.container.clientHeight||window.innerHeight,this.scene=new p,this.camera=new f(75,this.width/this.height,.01,10),this.camera.position.z=1,this.renderer=new w({antialias:!0,alpha:!0}),this.renderer.setSize(this.width,this.height),this.container.appendChild(this.renderer.domElement),this.control=new x(this.camera,this.renderer.domElement),this.resize(),addEventListener("resize",this.resize.bind(this),!1),this.addObject(),this.animate()}animate(){if(this.mesh.rotation.x+=this.time/1e3,this.mesh.rotation.y+=this.time/1e3,this.render(),this.container.getBoundingClientRect().width>0)requestAnimationFrame(this.animate.bind(this));else return}render(){this.renderer.render(this.scene,this.camera)}resize(){this.camera.aspect=this.container.clientWidth/this.container.clientHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.container.clientWidth,this.container.clientHeight),this.render()}addObject(){this.material=new h,this.material=new g({fragmentShader:`
                    void main(){
                        gl_FragColor = vec4(0.9,0.3,0.5,0.9);
                    }
                `,vertexShader:`
                void main(){
                    gl_Position = projectionMatrix * modelViewMatrix * vec4
                    (position,0.5);
                }`}),this.mesh=new c(this.geometry,this.material),this.scene.add(this.mesh)}beforeDestroy(){const t=e=>{var s,n,a,o;e instanceof c&&((s=e.geometry)!=null&&s.dispose&&e.geometry.dispose(),(n=e.material)!=null&&n.dispose&&e.material.dispose(),(o=(a=e.material)==null?void 0:a.texture)!=null&&o.dispose&&e.material.texture.dispose()),e instanceof v&&e.clear(),e instanceof _&&e.clear()};this.scene.traverse(e=>{t(e)}),u.clear(),this.scene.clear(),this.renderer.dispose(),this.renderer.forceContextLoss()}}const W={class:"view"},G=b({__name:"sketch",setup(r){const t=y(null);let e=new B;return C(()=>t.value,()=>{const s={container:t.value};s.container&&e.init(s)}),S(()=>{e.beforeDestroy()}),(s,n)=>(z(),M("div",W,[k("div",{class:"container",ref_key:"container",ref:t},null,512)]))}});export{G as default};
